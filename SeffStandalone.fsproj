<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop"> <!--WinDesktop is needed so that rescources work with dotnet build-->

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <UseWPF>true</UseWPF>
    <UseWinForms>true</UseWinForms>    <!--only for some message boxes ? -->
    <TargetFramework>net472</TargetFramework>    <!-- no net50-windows because no Thread.Abort() for fsi-->
    <LangVersion>preview</LangVersion>
    
    <NeutralLanguage>en</NeutralLanguage>
    <SatelliteResourceLanguages>en</SatelliteResourceLanguages>    <!--to only have the english resources-->
    <GenerateDocumentationFile>true</GenerateDocumentationFile>

    <RootNamespace>Seff</RootNamespace>
    <AssemblyName>Seff</AssemblyName>
    <Version>0.3.1.0</Version>
    <AssemblyVersion>0.3.1.0</AssemblyVersion>
    <FileVersion>0.3.1.0</FileVersion>
    
    <Authors>Goswin Rothenthal</Authors>
    <Product>Seff</Product>
    <Description>A hostable fsharp scripting editor for Windows</Description>
    <Copyright>Copyright: Goswin Rothenthal 2021 </Copyright>
    
    <ApplicationIcon>Media/LogoCursorTr.ico</ApplicationIcon>
    <Win32Resource>Media/LogoCursorTr.res</Win32Resource>      <!-- Win32Resource for Application Icon in explorer-->    
    
    <Platforms>x64;x86</Platforms>
    <Configurations>Debug;Release</Configurations>

    <DefineConstants>STANDALONE</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <OutputPath>binStandalone/Debug/x64/</OutputPath>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x86'">
    <OutputPath>binStandalone/Debug/x86</OutputPath>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
    <OutputPath>binStandalone/Release/x64/</OutputPath>
  </PropertyGroup> 
  
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x86'">
    <OutputPath>binStandalone/Release/x86/</OutputPath>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Update="FSharp.Core" Version="5.0.0" GeneratePathProperty="true" />  
    <!-- use 33.0.1 because EPPlus also fails with 35.0.0 (like Rhino) ?? try x86 version !-->
    <PackageReference Include="FSharp.Compiler.Service" Version="37.0.0" />    
    <!--<PackageReference Include="FSharp.DependencyManager.Nuget" Version="38.0.0" />-->
    <PackageReference Include="Microsoft.Build.Utilities.Core" Version="16.8.0" /><!--needed for FCS 38.0.0-->
  </ItemGroup>

  <ItemGroup>        
    <Reference Include="ICSharpCode.AvalonEdit">      <!-- must be build from dev branch of fork https://github.com/goswinr/AvalonEdit -->
      <HintPath>../AvalonEdit/ICSharpCode.AvalonEdit/bin/Release/net472/ICSharpCode.AvalonEdit.dll</HintPath> 
    </Reference>        
    <Reference Include="System.Windows.Forms" />        
    <Reference Include="WindowsBase" />
    <Reference Include="PresentationCore" />
    <Reference Include="PresentationFramework" />
  </ItemGroup>


  <ItemGroup>

    <EmbeddedResource Include="Media/LogoCursorTr.res" /> <!--  for Application Icon in explorer-->   
    <Resource Include="Media/LogoCursorTr.ico" />    
    <Resource Include="Media/FiraCode-Regular.ttf" />  
    <None Include="FSharpSynatxHighlighterExtended.xshd">    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>    </None>

    <Compile Include="Src/Util.fs" />
    <Compile Include="Src/Timer.fs" />
    <Compile Include="Src/Style.fs" />
    <Compile Include="Src/Model.fs" />
    <Compile Include="Src/GlobalErrorHandeling.fs" />
    <Compile Include="Src/Sync.fs" />
    
    <Compile Include="Src/Config/SaveWriter.fs" />
    <Compile Include="Src/Config/Hosting.fs" />
    <Compile Include="Src/Config/Settings.fs" />
    <Compile Include="Src/Config/DefaultCode.fs" />
    <Compile Include="Src/Config/FsiArugments.fs" />
    <Compile Include="Src/Config/OpenTabs.fs" />
    <Compile Include="Src/Config/RecentlyUsedFiles.fs" />
    <Compile Include="Src/Config/AutoCompleteStatistic.fs" />
    <Compile Include="Src/Config/AssemblyReferenceStatistic.fs" />
    <Compile Include="Src/Config/FoldingStatus.fs" />
    <Compile Include="Src/Config/Config.fs" />
    
    <Compile Include="Src/Fsi.fs" />    
    <Compile Include="Src/CompileScript.fs" />

    <Compile Include="Src/Editor/Selection.fs" />     
    <Compile Include="Src/Editor/Commenting.fs" />
    <Compile Include="Src/Editor/DocStringNew.fs" />
    <Compile Include="Src/Editor/DocString.fs" />
    <Compile Include="Src/Editor/SyntaxHighlighting.fs" />
    <Compile Include="Src/Editor/ErrorHighlighter.fs" />
    <Compile Include="Src/Editor/Checker.fs" />
    <Compile Include="Src/Editor/TypeInfo.fs" />
    <Compile Include="Src/Editor/CodeCompletion.fs" />
    <Compile Include="Src\Editor\Foldings.fs" />
    <Compile Include="Src/Editor/SelectedTextTracer.fs" />
    <Compile Include="Src/Editor/BracketColorizer.fs" />
    <Compile Include="Src/Editor/ColumnRulers.fs" />
    <Compile Include="Src/Editor/SwapLines.fs" />
    <Compile Include="Src/Editor/CursorBehaviour.fs" />
    <Compile Include="Src/Editor/Formating.fs" />
    <Compile Include="Src/Editor/Editor.fs" />
    <Compile Include="Src/Editor/UNUSEDNuget.fs" />
    
    <Compile Include="Src/Views/Views.Util.fs" />
    <Compile Include="Src/Views/Log.fs" />
    <Compile Include="Src/Views/Window.fs" />
    <Compile Include="Src/Views/Tab.fs" />
    <Compile Include="Src/Views/Tabs.fs" />
    <Compile Include="Src/Views/TabsAndLog.fs" />
    <Compile Include="Src/Views/Fonts.fs" />
    <Compile Include="Src/Views/Commands.fs" />
    <Compile Include="Src/Views/StatusBar.fs" />
    <Compile Include="Src/Views/Menu.fs" />
    <Compile Include="Src/Views/Seff.fs" />
    
    <Compile Include="Src/Initialize.fs" />    
    <Compile Include="Src/App.fs" />

  </ItemGroup>

   
  <Target Name="CopyFilesOverAfterBuild" BeforeTargets="AfterBuild">
    <!-- <Message Text="Copied FSharp.Core.xml file from $(PkgFSharp_Core) to output dir ." Importance="high"/> -->
    <!-- FSharp.Core.xml is missing otherwise ? to have it as intellisense provider-->
    <Copy SourceFiles="$(PkgFSharp_Core)/lib/netstandard2.0/FSharp.Core.xml" DestinationFiles="$(TargetDir)FSharp.Core.xml" ContinueOnError="false" />  
  </Target>

</Project>